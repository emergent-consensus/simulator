{% extends "layout.html" %}
{% set active_page = "network" %}

{% block head %}
{{ super() }}

<link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" />
<script src="{{ url_for('static', filename='cytoscape.js') }}"></script>
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

{% endblock %}

{% block header_name %}
Network
{% endblock %}

{% block content %}

{{ super() }}
{% endblock %}

{% block page_body %}
Network  details
<div id="cy"></div>
{% endblock %}
{% block scripts %}
{{ super() }}
<script>

$(function(){

 var cy = cytoscape({

  container: document.getElementById('cy'), // container to render in

  elements: [ // list of graph elements to start with
    { // node a
      data: { id: 'a' }
    },
    { // node b
      data: { id: 'b' }
    },
    { // edge ab
      data: { id: 'ab', source: 'a', target: 'b' }
    }
  ],

  style: [ // the stylesheet for the graph
    {
      selector: 'node',
      style: {
        'background-color': '#666',
        'label': 'data(id)'
      }
    },

    {
      selector: 'edge',
      style: {
        'width': 3,
        'line-color': '#ccc',
        'target-arrow-color': '#ccc',
        'target-arrow-shape': 'triangle'
      }
    }
  ],

  layout: {
    name: 'grid',
    rows: 1
  }

});
      var socket = io.connect('http://' + document.domain + ':' + location.port + '/test');

    socket.emit('my message', {data: "hi"});
    socket.on('reply', function(data) {
       cy.add([
  { group: "nodes", data: { id: "c" }},
  { group: "edges", data: { id: "e0", source: "b", target: "c" } }
]);
    });
});

$(document).ready(function(){

});

</script>
{% endblock %}
